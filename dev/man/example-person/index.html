<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Name and addresses Â· CombinedParsers.jl</title><link rel="canonical" href="https://gkappler.github.io/CombinedParsers.jl/man/example-person/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">CombinedParsers.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../guide/">Overview</a></li><li><a class="tocitem" href="../user/">User Guide</a></li><li><a class="tocitem" href="../pcre-compliance/">PCRE Compliance</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Name and addresses</a><ul class="internal"><li><a class="tocitem" href="#Names-1"><span>Names</span></a></li><li><a class="tocitem" href="#Addresses-1"><span>Addresses</span></a></li><li><a class="tocitem" href="#Person&#39;s-address-data-1"><span>Person&#39;s address data</span></a></li></ul></li><li><a class="tocitem" href="../example-number-ranges/">Number sequences</a></li><li><a class="tocitem" href="../example-palimdromes/">Palimdrome&lt;:CombinedParsers</a></li><li><a class="tocitem" href="../pcre/">Regular Expressions</a></li><li><a class="tocitem" href="../json/">JSON</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../lib/public/">Public</a></li><li><a class="tocitem" href="../../lib/internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Name and addresses</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Name and addresses</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gkappler/CombinedParsers.jl/docs/docs/src/man/example-person.jl" title="Edit on GitHub"><span class="docs-icon fab">ï‚›</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="What-is-Parsing?-1"><a class="docs-heading-anchor" href="#What-is-Parsing?-1">What is Parsing?</a><a class="docs-heading-anchor-permalink" href="#What-is-Parsing?-1" title="Permalink"></a></h1><p>When you read texts, you understand what the words mean. Your smart brain analyzes the series of letter symbols. Like you move your muscles without being aware of every detail, intuitively, your brain understands the meaning of text after assigning syntax to each word.</p><p>This post explains how a computer can read a text (parsing) with a simple example, reading a name in a letter, a list of students, or citizens. The post also explains how to program a parser in julia.</p><p>Let&#39;s get to it: These examples represent how a name should be parsed into a Julia <code>NamedTuple</code> representation.</p><pre><code class="language-julia-repl">julia&gt; using CombinedParsers

julia&gt; using CombinedParsers.Regexp</code></pre><p>you can write a program to parse such names and addresses. The example uses parser building blocks:</p><pre><code class="language-julia-repl">julia&gt; import CombinedParsers.Regexp: word, words

julia&gt; import CombinedParsers.Regexp: whitespace_horizontal, whitespace_maybe, newline</code></pre><h2 id="Names-1"><a class="docs-heading-anchor" href="#Names-1">Names</a><a class="docs-heading-anchor-permalink" href="#Names-1" title="Permalink"></a></h2><p>can be written in many ways. The way a name is written tn terms of these building blocks, is a</p><pre><code class="language-julia-repl">julia&gt; @syntax for name in texts
           examples = (
               &quot;Lieber Lorenz,&quot;    =&gt; (greeting=&quot;Lieber&quot;, lastname = missing, name=&quot;Lorenz&quot;),
               &quot;Namen, Vornamen&quot;   =&gt; (greeting=missing, lastname = &quot;Namen&quot;, name=&quot;Vornamen&quot;),
               &quot;Vornamen    Namen&quot; =&gt; (greeting=missing, lastname = &quot;Namen&quot;, name=&quot;Vornamen&quot;)
           )
           Sequence(
               whitespace_maybe,
               !Either(
                   &quot;Hi&quot;,re&quot;Lieber?&quot;, re&quot;Sehr geehrter?&quot;,
                   &quot;Herzliche GrÃ¼ÃŸe,\n*&quot;,
                   &quot;&quot; =&gt; missing),
               whitespace_maybe,
               Either(
                   Sequence(
                       :lastname =&gt; word,
                       re&quot; *, *&quot;, # comma separating preceding lastname
                       :name     =&gt; words),
                   Sequence(
                       :name     =&gt; words,
                       *(&quot; &quot;),     # spaces
                       :lastname =&gt; word)
               ) ## todo: remove :person, splice NamedTuple
           ) do v
               ( greeting = v[2],
                 name = v[4].name,
                 lastname = v[4].lastname
                 )
           end
       end;
â”Œ Warning: examples currently ignored
â”” @ CombinedParsers ~/build/gkappler/CombinedParsers.jl/src/CombinedParsers.jl:1027</code></pre><p><code>CombinedParsers.@syntax</code> defines a string macro for using the syntax parser in your Julia program: See also <a href="../../lib/public/#CombinedParsers.@syntax"><code>@syntax</code></a></p><pre><code class="language-julia-repl">julia&gt; name&quot;Person, Called&quot;
(greeting = &quot;&quot;, name = &quot;Called&quot;, lastname = &quot;Person&quot;)</code></pre><p><code>CombinedParsers.@syntax</code> defines a syntax parser to use in your Julia program:</p><pre><code class="language-julia-repl">julia&gt; name(&quot;Best,&quot;*whitespace_maybe, &quot;Best, yours truly&quot;)
(greeting = &quot;&quot;, name = &quot;yours&quot;, lastname = &quot;truly&quot;)</code></pre><h2 id="Addresses-1"><a class="docs-heading-anchor" href="#Addresses-1">Addresses</a><a class="docs-heading-anchor-permalink" href="#Addresses-1" title="Permalink"></a></h2><p>On a letter, you find the</p><pre><code class="language-julia-repl">julia&gt; @syntax for street_address in texts
           examples = &quot;Am Hang 19&quot; =&gt; (street=&quot;Am Hang&quot;, no=19)
           Sequence(:street =&gt; !Repeat(AnyChar()),
                    &quot; &quot;,
                    :no =&gt;Numeric(Int))
       end
â”Œ Warning: examples currently ignored
â”” @ CombinedParsers ~/build/gkappler/CombinedParsers.jl/src/CombinedParsers.jl:1027
ğŸ—„ Sequence |&gt; map(#37) |&gt; with_name(:street_address)
â”œâ”€ .* AnyChar |&gt; Repeat |&gt; JoinSubstring |&gt; with_name(:street)
â”œâ”€ \
â””â”€ TextParse.Numeric{Int64} TextParse.Numeric |&gt; with_name(:no)
::NamedTuple{(:street, :no),Tuple{SubString,Int64}}</code></pre><p>In programming, regular expressions are the standard language for matching sequences of letters, a <code>String</code>. The street is a sequence of alphabetical symbols or space (not numbers or <code>AnyChar()</code>) can be written concisely as <code>re&quot;Regex&quot;</code>:</p><pre><code class="language-julia-repl">julia&gt; @syntax for street_address in texts ## todo: override in Either
           Sequence(:street =&gt; !re&quot;[[:alpha:] ]+&quot;, whitespace_horizontal, :no =&gt;Numeric(Int))
       end;

julia&gt; street_address&quot;Allee 47&quot;
NamedTuple{(:street, :no),Tuple{SubString,Int64}}((&quot;Allee&quot;, 47))</code></pre><p>Defined <code>@syntax</code>&#39;s can be combined.</p><pre><code class="language-julia-repl">julia&gt; whitenewline = Repeat1(Either(whitespace_horizontal,newline));

julia&gt; @syntax for address in texts
           Sequence(
               Optional(&quot;Adresse:&quot;,whitenewline),
               :door =&gt; street_address, whitenewline,
               :zip =&gt;Numeric(Int), whitespace_horizontal,
               :city =&gt; !re&quot;[[:alpha:] ]+&quot;,
               whitespace_maybe
           )
       end
ğŸ—„ Sequence |&gt; map(#37) |&gt; with_name(:address)
â”œâ”€ ğŸ—„? Sequence |&gt; Optional(default=missing)
â”‚  â”œâ”€ Adresse\:
â”‚  â””â”€ |ğŸ—„...+ Either |&gt; Repeat
â”‚     â”œâ”€ [\â€ƒ\Â \u180e\âŸ\â€ˆ\â€‚\â€„\â€¯\â€…\áš€\ \â€‰\â€Š\â€†\ã€€\â€\â€‡\t\â€€]+ CharIn |&gt; Repeat |&gt; JoinSubstring
â”‚     â””â”€ (?&gt;|ğŸ—„...) Either |&gt; Atomic
â”‚        â”œâ”€ \r\n
â”‚        â””â”€ [\r\u2028\v\u2029\n\f\u85] CharIn
â”œâ”€ ğŸ—„ Sequence |&gt; map(#37) |&gt; with_name(:street_address) |&gt; with_name(:door)
â”‚  â”œâ”€ [\ \p{1:5}]+ CharIn |&gt; Repeat |&gt; JoinSubstring |&gt; with_name(:street)
â”‚  â”œâ”€ [\â€ƒ\Â \u180e\âŸ\â€ˆ\â€‚\â€„\â€¯\â€…\áš€\ \â€‰\â€Š\â€†\ã€€\â€\â€‡\t\â€€]+ CharIn |&gt; Repeat |&gt; JoinSubstring
â”‚  â””â”€ TextParse.Numeric{Int64} TextParse.Numeric |&gt; with_name(:no)
â”œâ”€ |ğŸ—„...+ Either |&gt; Repeat
â”‚  â”œâ”€ [\â€ƒ\Â \u180e\âŸ\â€ˆ\â€‚\â€„\â€¯\â€…\áš€\ \â€‰\â€Š\â€†\ã€€\â€\â€‡\t\â€€]+ CharIn |&gt; Repeat |&gt; JoinSubstring
â”‚  â””â”€ (?&gt;|ğŸ—„...) Either |&gt; Atomic
â”‚     â”œâ”€ \r\n
â”‚     â””â”€ [\r\u2028\v\u2029\n\f\u85] CharIn
â”œâ”€ TextParse.Numeric{Int64} TextParse.Numeric |&gt; with_name(:zip)
â”œâ”€ [\â€ƒ\Â \u180e\âŸ\â€ˆ\â€‚\â€„\â€¯\â€…\áš€\ \â€‰\â€Š\â€†\ã€€\â€\â€‡\t\â€€]+ CharIn |&gt; Repeat |&gt; JoinSubstring
â”œâ”€ [\ \p{1:5}]+ CharIn |&gt; Repeat |&gt; JoinSubstring |&gt; with_name(:city)
â””â”€ [\â€ƒ\Â \u180e\âŸ\â€ˆ\â€‚\â€„\â€¯\â€…\áš€\ \â€‰\â€Š\â€†\ã€€\â€\â€‡\t\â€€]* CharIn |&gt; Repeat |&gt; JoinSubstring
::NamedTuple{(:door, :zip, :city),Tuple{NamedTuple{(:street, :no),Tuple{SubString,Int64}},Int64,SubString}}</code></pre><p>A <code>@syntax</code> can be applied as a julia String macro</p><pre><code class="language-julia-repl">julia&gt; address&quot;&quot;&quot;Allee 47
       80000 Augsburg
       &quot;&quot;&quot;
NamedTuple{(:door, :zip, :city),Tuple{NamedTuple{(:street, :no),Tuple{SubString,Int64}},Int64,SubString}}((NamedTuple{(:street, :no),Tuple{SubString,Int64}}((&quot;Allee&quot;, 47)), 80000, &quot;Augsburg&quot;))</code></pre><h2 id="Person&#39;s-address-data-1"><a class="docs-heading-anchor" href="#Person&#39;s-address-data-1">Person&#39;s address data</a><a class="docs-heading-anchor-permalink" href="#Person&#39;s-address-data-1" title="Permalink"></a></h2><p>For person entries in texts a <code>CombinedParser</code> can be intuitively written as</p><pre><code class="language-julia-repl">julia&gt; @syntax for person_adresses in texts
           Sequence(Optional(&quot;Name:&quot;,whitenewline),
                    :person =&gt; name, Repeat1(whitenewline),
                    :adresses =&gt; join(address, Repeat1(whitenewline)));
       end;

julia&gt; person_adresses&quot;&quot;&quot;
       Name: Gottfried MutbÃ¼rger
       
       Adresse:
       Am Hang 19
       86653 Glauberg
       
       Adresse:
       Allee 47
       80650 Zweistadt
       &quot;&quot;&quot;
NamedTuple{(:person, :adresses),Tuple{NamedTuple{(:greeting, :name, :lastname),_A} where _A&lt;:Tuple,Array{NamedTuple{(:door, :zip, :city),Tuple{NamedTuple{(:street, :no),Tuple{SubString,Int64}},Int64,SubString}},1}}}(((greeting = &quot;&quot;, name = &quot;Gottfried&quot;, lastname = &quot;MutbÃ¼rger&quot;), NamedTuple{(:door, :zip, :city),Tuple{NamedTuple{(:street, :no),Tuple{SubString,Int64}},Int64,SubString}}[NamedTuple{(:door, :zip, :city),Tuple{NamedTuple{(:street, :no),Tuple{SubString,Int64}},Int64,SubString}}((NamedTuple{(:street, :no),Tuple{SubString,Int64}}((&quot;Am Hang&quot;, 19)), 86653, &quot;Glauberg&quot;)), NamedTuple{(:door, :zip, :city),Tuple{NamedTuple{(:street, :no),Tuple{SubString,Int64}},Int64,SubString}}((NamedTuple{(:street, :no),Tuple{SubString,Int64}}((&quot;Allee&quot;, 47)), 80650, &quot;Zweistadt&quot;))]))</code></pre><p>This example demonstrated the terms &quot;syntax&quot; and &quot;parsing&quot;. Here, a syntax defines the ways in which information is written. Parsing means the computer reads the information back from the way it was written: The <code>CombinedParser.jl</code> definitions create a program that parses a formal <code>NamedTuple</code> representation from texts written in that way.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../pcre-compliance/">Â« PCRE Compliance</a><a class="docs-footer-nextpage" href="../example-number-ranges/">Number sequences Â»</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 20 June 2020 14:46">Saturday 20 June 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
